{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-grid" data-token="{{ token }}">
    <div class="card video-feed-card">
        <h3>Live Camera Feed</h3>
        <div class="video-container">
            <img src="{{ url_for('main.video_feed') }}" alt="Live camera feed">
        </div>
    </div>
    <div class="card status-card">
        <h3>System Status</h3>
        <div class="stats-row">
            <div class="stat">Connection: <span id="connection-status" class="status-disconnected">DISCONNECTED</span></div>
        </div>
    </div>
    <div class="card">
        <h3>Live Stats</h3>
        <div class="stats-row">
            <div class="stat">
                <span class="label">CPU Temp:</span>
                <span id="cpu-temp">--</span>Â°C
            </div>
            <div class="stat">
                <span class="label">Battery:</span>
                <span id="battery">--</span>%
            </div>
        </div>
    </div>

    <div class="card">
        <h3>Manual Control</h3>
        <div class="control-pad">
            <button class="btn" onmousedown="sendCommand('forward')" onmouseup="sendCommand('stop')"><i class="fas fa-arrow-up"></i></button>
            <div class="side-btns">
                <button class="btn" onmousedown="sendCommand('left')" onmouseup="sendCommand('stop')"><i class="fas fa-arrow-left"></i></button>
                <button class="btn btn-stop" onclick="sendCommand('stop')"><i class="fas fa-stop"></i></button>
                <button class="btn" onmousedown="sendCommand('right')" onmouseup="sendCommand('stop')"><i class="fas fa-arrow-right"></i></button>
            </div>
            <button class="btn" onmousedown="sendCommand('backward')" onmouseup="sendCommand('stop')"><i class="fas fa-arrow-down"></i></button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}